// AUTOGENERATED FILE - DO NOT MODIFY!
// This file generated by Djinni from zumo_core.djinni

#pragma once

#include <memory>
#include <optional>
#include <string>
#include <unordered_map>

namespace zumo {

class ChangeListener;
class HistoricalExchangeRatesCallback;
class HttpProvider;
class User;
class UserCallback;
class Utils;
class WebSocketFactory;
struct ExchangeRate;
struct ExchangeSetting;
struct TransactionFeeRate;

/** Entry point to ZumoKit C++ SDK */
class ZumoCore {
public:
    virtual ~ZumoCore() {}

    /**
     * Get ZumoKit SDK version.
     * @return semantic version tag if exists, commit hash otherwise
     */
    static std::string get_version();

    /**
     * Initializes ZumoKit SDK. Should only be called once.
     *
     * @param http_provider           HTTP provider
     * @param web_socket_factory      WebSocket factory
     * @param api_key                 ZumoKit API Key
     * @param api_url                 ZumoKit API URL
     * @param transaction_service_url ZumoKit Transaction Service URL
     * @param card_service_url        ZumoKit Card Service URL
     *
     * @return ZumoKit instance
     */
    static std::shared_ptr<ZumoCore> init(const std::shared_ptr<HttpProvider> & http_provider, const std::shared_ptr<WebSocketFactory> & web_socket_factory, const std::string & api_key, const std::string & api_url, const std::string & transaction_service_url, const std::string & card_service_url);

    /**
     * Signs in user corresponding to user token set. Sets current user to the newly signed in user.
     * Refer to <a href="https://developers.zumo.money/docs/setup/server#get-zumokit-user-token">Server</a> guide for details on how to get user token set.
     *
     * @param user_token_set   user token set
     * @param callback         an interface to receive the result or error
     *
     * @see User
     */
    virtual void sign_in(const std::string & user_token_set, const std::shared_ptr<UserCallback> & callback) = 0;

    /** Signs out current user. */
    virtual void sign_out() = 0;

    /**
     * Get currently signed-in user or null.
     *
     * @return current user or null
     */
    virtual std::shared_ptr<User> get_current_user() = 0;

    /**
     * Get crypto utils class.
     *
     * @return crypto utils
     */
    virtual std::shared_ptr<Utils> get_utils() = 0;

    /**
     * Get exchange rate for selected currency pair.
     *
     * @param from_currency   currency code
     * @param to_currency     currency code
     *
     * @return exchange rate or null
     */
    virtual std::optional<ExchangeRate> get_exchange_rate(const std::string & from_currency, const std::string & to_currency) = 0;

    /**
     * Get all available exchange rates.
     *
     * @return mapping between currency pairs and exchange rates
     */
    virtual std::unordered_map<std::string, std::unordered_map<std::string, ExchangeRate>> get_exchange_rates() = 0;

    /**
     * Get exchange setting for selected currency pair.
     *
     * @param from_currency   currency code
     * @param to_currency     currency code
     *
     * @return exchange setting or null
     */
    virtual std::optional<ExchangeSetting> get_exchange_setting(const std::string & from_currency, const std::string & to_currency) = 0;

    /**
     * Get all available exchange settings.
     *
     * @return mapping between currency pairs and exchange settings
     */
    virtual std::unordered_map<std::string, std::unordered_map<std::string, ExchangeSetting>> get_exchange_settings() = 0;

    /**
     * Get transaction fee rates for selected crypto currency.
     *
     * @param currency currency code
     *
     * @return transaction fee rate or null
     */
    virtual std::optional<TransactionFeeRate> get_transaction_fee_rate(const std::string & currency) = 0;

    /**
     * Get all available crypto transaction fee rates.
     *
     * @return mapping between cryptocurrencies and transaction fee rate
     */
    virtual std::unordered_map<std::string, TransactionFeeRate> get_transaction_fee_rates() = 0;

    /**
     * Fetch historical exchange rates for supported time intervals.
     * On success callback returns historical exchange rates are contained in a mapping between
     * time interval on a top level, from currency on second level, to currency on third level and ExchangeRate objects.
     *
     * @param callback         an interface to receive the result or error
     *
     * @see TimeInterval
     */
    virtual void fetch_historical_exchange_rates(const std::shared_ptr<HistoricalExchangeRatesCallback> & callback) = 0;

    /**
     * Listen to changes in current userâ€™s sign in state, exchange settings and transaction fee rates.
     * @param listener interface to listen to changes
     */
    virtual void add_change_listener(const std::shared_ptr<ChangeListener> & listener) = 0;

    /**
     * Remove change listener.
     * @param listener interface to listen to changes
     */
    virtual void remove_change_listener(const std::shared_ptr<ChangeListener> & listener) = 0;
};

}  // namespace zumo
